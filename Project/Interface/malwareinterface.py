import tkinter as tk
import subprocess


class Main(tk.Frame):
    def __init__(self, root):
        super().__init__(root)

        self.init_main()

    def init_main(self):
        toolbar = tk.Frame(bg='#d7d8e0', bd=2)
        toolbar.pack(side=tk.TOP, fill=tk.X)

        self.logo = tk.PhotoImage(file='./image/logo.gif')
        logo = tk.Button(toolbar,compound=tk.TOP, image=self.logo)
        logo.pack(side=tk.TOP)
        logo.config(bd=2,relief=tk.SUNKEN)

        self.add_img = tk.PhotoImage(file='./image/DownloadIcon.gif')
        btn_open_dialog = tk.Button(toolbar, text='Run Malware Crawler', command=self.vxvaultrun, bg='#d7d8e0', bd=0,
                                    compound=tk.TOP, image=self.add_img)
        btn_open_dialog.pack(side=tk.LEFT)
        btn_open_dialog.config( bd=4,fg='blue')

        self.add_img2 = tk.PhotoImage(file='./image/VirusTotallogo.gif')
        btn_open_dialog2 = tk.Button(toolbar, text='Run VirusTotal', command=self.virustotal, bg='#d7d8e0', bd=0,
                                     compound=tk.TOP, image=self.add_img2)
        btn_open_dialog2.pack(side=tk.LEFT)
        btn_open_dialog2.config(bd=4,fg='blue')

        self.add_img3 = tk.PhotoImage(file='./image/feature.gif')
        btn_open_dialog3 = tk.Button(toolbar, text='Run Feature Extraction', command=self.featurework, bg='#d7d8e0', bd=0,
                                     compound=tk.TOP, image=self.add_img3)
        btn_open_dialog3.pack(side=tk.LEFT)
        btn_open_dialog3.config(bd=4,fg='blue')

        self.add_img4 = tk.PhotoImage(file='./image/web.gif')
        btn_open_dialog4 = tk.Button(toolbar, text='Run Web App', command=self.webapp, bg='#d7d8e0', bd=0,
                                     compound=tk.TOP, image=self.add_img4)
        btn_open_dialog4.pack(side=tk.LEFT)
        btn_open_dialog4.config(bd=4,fg='blue')

    def vxvaultrun(self):
        pid = subprocess.Popen(args=[
            "gnome-terminal", "--command=python3 ../MalwareCrawler/urlhaus.py"]).pid
        print(pid)

    def virustotal(self):
        pid2 = subprocess.Popen(args=[
            "gnome-terminal", "--command=python3 ../MalwareProject/Project.py"]).pid
        print(pid2)

    def featurework(self):
        pid3 = subprocess.Popen(args=[
            "gnome-terminal", "--command=python3 ../featurework/Main.py"]).pid
        print(pid3)

    def webapp(self):
        pid3 = subprocess.Popen(args=[
            "gnome-terminal", "--command=python3 ../PythonFlaskApp/app.py"]).pid
        print(pid3)


if __name__ == "__main__":
    root = tk.Tk()
    app = Main(root)
    app.pack()
    root.title("Malware Snarer")
    root.geometry("900x600+300+200")
    root.resizable(False, False)
    root.mainloop()